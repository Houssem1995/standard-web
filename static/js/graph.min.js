function loadPlayerGraph(c,a){var d=6E4*(new Date).getTimezoneOffset();a=a||2;var b={};c.attr("weekindex")&&(b.weekIndex=c.attr("weekindex"));$.ajax({url:"/"+a+"/player_graph",data:b,success:function(a){c.removeClass("progress");var b=a.start_time-d,g=a.end_time-d,f=[],e=[];a.points.map(function(a){var b=a.time-d,c=a.new_players;f.push([b,a.player_count]);0<=c&&e.push([b,c])});a=[{data:f}];e.length&&a.push({data:e,yaxis:2});a.push({data:[[b],[g]]});$.plot(c,a,{grid:{hoverable:!0,backgroundColor:"#ffffff"},
colors:["#7E9BFF","#F00"],series:{lines:{fill:!0}},xaxes:[{mode:"time",minTickSize:[1,"day"],timeformat:"%b %d"}],yaxes:[{min:0,max:60,tickSize:6,position:"right"},{min:0,max:40}]})},error:function(a){}})}function showGraphTooltip(c,a,d){$('<div id="graph-tooltip">'+d+"</div>").css({position:"absolute",display:"none",top:a-12,left:c+14,border:"1px solid #666",padding:"2px","background-color":"#111",color:"#fff"}).appendTo("body").show()}
$(document).ready(function(){var c=null;$(".graph").bind("plothover",function(a,d,b){b?c!=b.dataIndex&&(c=b.dataIndex,$("#graph-tooltip").remove(),a=b.datapoint[1],showGraphTooltip(b.pageX,b.pageY,a+(1==a?" player":" players"))):($("#graph-tooltip").remove(),c=null)})});
